/*

architecture :

-----BEGIN PGP MESSAGE-----
Comment: GPGTools - https://gpgtools.org

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
=0WYt
-----END PGP MESSAGE-----

*/

var openpgp = require('openpgp'); // use as CommonJS, AMD, ES6 module or via window.openpgp
const fs = require('fs');
const fs_encoding = "utf-8";
openpgp.initWorker({ path:'openpgp.worker.js' }) // set the relative web worker path

class Chain {
    constructor(links) {
        this.links = links || [];
    }

    appendLink(link) {
        this.links.append(link);
    }
}

class ChainLink {
    constructor(pub, ip, rid=null, priv=null) {
        this.pub = pub;
        this.rid = rid;
        this.ip = ip;
        this.online = true;
        this.data = null;
        this.priv = priv;
    }
}


function readdirAsync(path) {

  return new Promise(function (resolve, reject) {
    fs.readFile(path, fs_encoding, function (error, result) {
      if (error) {
        // console.log(error);
        reject(error);
      } else {
        console.log(result);
        resolve(result);
      }
    });
  });
}

(async () => {
    var pubkey = await readdirAsync("/Users/snn/.ssh/snn_test.asc");
    var privkey = await readdirAsync("/Users/snn/.ssh/snn_testp.asc");
    new ChainLink()
})();
